<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Matthias Uckert" />


<title>Getting Data from the Web: SEC’s EDGAR</title>

<script src="site_libs/header-attrs-2.7/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cerulean.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  { color: #cccccc; background-color: #303030; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ffcfaf; } /* Alert */
code span.an { color: #7f9f7f; font-weight: bold; } /* Annotation */
code span.at { } /* Attribute */
code span.bn { color: #dca3a3; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #f0dfaf; } /* ControlFlow */
code span.ch { color: #dca3a3; } /* Char */
code span.cn { color: #dca3a3; font-weight: bold; } /* Constant */
code span.co { color: #7f9f7f; } /* Comment */
code span.cv { color: #7f9f7f; font-weight: bold; } /* CommentVar */
code span.do { color: #7f9f7f; } /* Documentation */
code span.dt { color: #dfdfbf; } /* DataType */
code span.dv { color: #dcdccc; } /* DecVal */
code span.er { color: #c3bf9f; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #c0bed1; } /* Float */
code span.fu { color: #efef8f; } /* Function */
code span.im { } /* Import */
code span.in { color: #7f9f7f; font-weight: bold; } /* Information */
code span.kw { color: #f0dfaf; } /* Keyword */
code span.op { color: #f0efd0; } /* Operator */
code span.ot { color: #efef8f; } /* Other */
code span.pp { color: #ffcfaf; font-weight: bold; } /* Preprocessor */
code span.sc { color: #dca3a3; } /* SpecialChar */
code span.ss { color: #cc9393; } /* SpecialString */
code span.st { color: #cc9393; } /* String */
code span.va { } /* Variable */
code span.vs { color: #cc9393; } /* VerbatimString */
code span.wa { color: #7f9f7f; font-weight: bold; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>







<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-sm-12 col-md-4 col-lg-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-sm-12 col-md-8 col-lg-9">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Accounting Class</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Day 1 - Getting Data
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="./01_get_edgar_data.html">Session 1 - Getting Data from the Web: SEC's EDGAR</a>
    </li>
    <li>
      <a href="./02_get_arcom_data.html">Session 2 - Getting Data from the Web: www.AnnualReport.com</a>
    </li>
    <li>
      <a href="./03_xbrl.html">Session 3 - Getting Data from the Web: XBRL</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Day 2 - Analysing Data
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Session 1 - Analysing Data: XBRL Tags</li>
    <li class="dropdown-header">Session 2 - Analysing Data: Textual Analysis</li>
    <li class="dropdown-header">Session 3 - Analysing Data: Excel and R</li>
  </ul>
</li>
<li>
  <a href="./contact.html">Contact</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/githubusername/mywebsite">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Getting Data from the Web: SEC’s EDGAR</h1>
<h4 class="author">Matthias Uckert</h4>
<h4 class="date">20 April, 2021</h4>

</div>


<hr />
<div id="description" class="section level1">
<h1>Description</h1>
<p>In this session we will retrieve information from the SEC EDGAR database. Getting data from EDGAR is exemplary for getting information from the web, where we have API (Application Programming Interface) access.</p>
<p>Throughout this script we will use custom functions to download and transform data. All the script specific functions are stored in this folder: <strong>1_code/00_functions/f-get_edgar_data.R</strong></p>
<p>EDGAR is an established source of financial information. But normally companies and researchers start gathering financial information from commercial databases such as <strong>Bureau Van Dijk - Orbis</strong>, <strong>Refinitiv - Datastream</strong> or <strong>Compustat</strong></p>
<p>Compustat: <a href="https://wrds-www.wharton.upenn.edu/" class="uri">https://wrds-www.wharton.upenn.edu/</a> Orbis: <a href="https://orbis4.bvdinfo.com/ip" class="uri">https://orbis4.bvdinfo.com/ip</a></p>
</div>
<div id="script-setup" class="section level1">
<h1>Script Setup</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse); <span class="fu">library</span>(edgarWebR); <span class="fu">library</span>(lubridate); <span class="fu">library</span>(here)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(furrr); <span class="fu">library</span>(stringi); <span class="fu">library</span>(textstem); <span class="fu">library</span>(tidytext)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor); <span class="fu">library</span>(tools); <span class="fu">library</span>(patchwork); <span class="fu">library</span>(scales)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra); <span class="fu">library</span>(openxlsx)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;1_code/00_functions/f-all.R&quot;</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;1_code/00_functions/f-get_edgar_data.R&quot;</span>)</span></code></pre></div>
</div>
<div id="code" class="section level1">
<h1>Code</h1>
<div id="paths" class="section level2">
<h2>Paths</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>lst_paths <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">dir_main    =</span> <span class="st">&quot;2_output/01_get_edgar_data/&quot;</span>,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">path_filing =</span> <span class="st">&quot;2_output/01_get_edgar_data/edgar_filings.rds&quot;</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">path_detail =</span> <span class="st">&quot;2_output/01_get_edgar_data/edgar_details.rds&quot;</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">path_f500   =</span> <span class="st">&quot;2_output/01_get_edgar_data/f500.xlsx&quot;</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="fu">create_dirs</span>()</span></code></pre></div>
</div>
<div id="get-fortune-500-companies" class="section level2">
<h2>Get Fortune 500 Companies</h2>
<p>Her we use an open source data repository ‘datahub.io’ to retrieve the <u><strong>fortune 500 companies</strong></u> with some financial information. We won’t use the complete data set, but filter for the top 100 companies (using less companies will let the code run faster) with the highest market capitalization. You can change the number of companies by changing the integer vector: <strong>.n_companies</strong> in the chunk below.</p>
<p>We use a custom function: <u>get_f500</u><strong>()</strong> to download the Fortune 500 dataset.</p>
<div id="function-get_f500" class="section level3">
<h3>Function: <u>get_f500()</u></h3>
<pre><code>## function() {
##   
##   # Source: https://datahub.io/core/s-and-p-500-companies-financials#r
##   
##   json_file &lt;- &#39;https://datahub.io/core/s-and-p-500-companies-financials/datapackage.json&#39;
##   json_data &lt;- jsonlite::fromJSON(paste(readLines(json_file), collapse=&quot;&quot;))
## 
##   for(i in 1:length(json_data$resources$datahub$type)){
##     if(json_data$resources$datahub$type[i]==&#39;derived/csv&#39;){
##       path_to_file = json_data$resources$path[i]
##       data &lt;- read.csv(url(path_to_file))
##     }
##   }
##   
##   return(data)
## }</code></pre>
</div>
<div id="download-dataset" class="section level3">
<h3>Download Dataset</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>.n_companies <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># browseURL(&quot;https://datahub.io/core/s-and-p-500-companies-financials#r&quot;)</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>tab_f500_all <span class="ot">&lt;-</span> <span class="fu">get_f500</span>() <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Function from the janitor package, makes nice column names</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="sc">%&gt;%</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Arrange, so that the highest market cap appears first in the dataframe</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(market_cap)) </span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="fu">write.xlsx</span>(tab_f500_all, lst_paths<span class="sc">$</span>path_f500, <span class="cn">TRUE</span>)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Select only the firms with the highest market cap</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>tab_f500_t10 <span class="ot">&lt;-</span> <span class="fu">slice</span>(tab_f500_all, <span class="dv">1</span><span class="sc">:</span>.n_companies)</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Quick look at the companies we use</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(tab_f500_t10, symbol, name, sector)[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, ] <span class="sc">%&gt;%</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">show_table</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class=" lightable-paper lightable-hover table" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; margin-left: auto; margin-right: auto; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
symbol
</th>
<th style="text-align:left;">
name
</th>
<th style="text-align:left;">
sector
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
AAPL
</td>
<td style="text-align:left;">
Apple Inc. 
</td>
<td style="text-align:left;">
Information Technology
</td>
</tr>
<tr>
<td style="text-align:left;">
GOOGL
</td>
<td style="text-align:left;">
Alphabet Inc Class A
</td>
<td style="text-align:left;">
Information Technology
</td>
</tr>
<tr>
<td style="text-align:left;">
GOOG
</td>
<td style="text-align:left;">
Alphabet Inc Class C
</td>
<td style="text-align:left;">
Information Technology
</td>
</tr>
<tr>
<td style="text-align:left;">
MSFT
</td>
<td style="text-align:left;">
Microsoft Corp. 
</td>
<td style="text-align:left;">
Information Technology
</td>
</tr>
<tr>
<td style="text-align:left;">
AMZN
</td>
<td style="text-align:left;">
Amazon.com Inc
</td>
<td style="text-align:left;">
Consumer Discretionary
</td>
</tr>
<tr>
<td style="text-align:left;">
FB
</td>
<td style="text-align:left;">
Facebook, Inc. 
</td>
<td style="text-align:left;">
Information Technology
</td>
</tr>
<tr>
<td style="text-align:left;">
JPM
</td>
<td style="text-align:left;">
JPMorgan Chase &amp; Co. 
</td>
<td style="text-align:left;">
Financials
</td>
</tr>
<tr>
<td style="text-align:left;">
JNJ
</td>
<td style="text-align:left;">
Johnson &amp; Johnson
</td>
<td style="text-align:left;">
Health Care
</td>
</tr>
<tr>
<td style="text-align:left;">
XOM
</td>
<td style="text-align:left;">
Exxon Mobil Corp. 
</td>
<td style="text-align:left;">
Energy
</td>
</tr>
<tr>
<td style="text-align:left;">
BAC
</td>
<td style="text-align:left;">
Bank of America Corp
</td>
<td style="text-align:left;">
Financials
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="get-company-index-links" class="section level2">
<h2>Get Company Index-Links</h2>
<p>Before we attempt to download data in bulk, we let us first explore the SEC’s EDGAR website:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># browseURL(tab_f500_all$sec_filings[1])</span></span></code></pre></div>
<p>The first step is to retrieve the index-links for the fortune 500 companies we selected in the first step. Downloading data from the web is always tricky. We can run into request limits, client or server side issues. So thinking about how to set up a download is crucial in order to make the analysis</p>
<p>We use a custom function: <strong>map_company_filings()</strong> to retrieve the Index Links from EDGAR.</p>
<div id="function-map_company_filings" class="section level3">
<h3>Function: map_company_filings()</h3>
<pre><code>## function(.tickers, .ownership = FALSE, .type = &quot;&quot;, .before = &quot;&quot;,
##                                 .count = 100, .page = 1, .progress = TRUE, .sleep = 0, .retry = 5) {
##   sf &lt;- purrr::safely(edgarWebR::company_filings)
##   names(.tickers) &lt;- .tickers
##   
##   
##   pb &lt;- progress::progress_bar$new(total = length(.tickers))
##   
##   lst &lt;- purrr::map(
##     .x = .tickers,
##     .f = ~ {
##       if (.progress) pb$tick() # Progress bar
##       Sys.sleep(.sleep) # Optionally, a sleep parameter
##       check &lt;- sf(.x, .ownership, .type, .before, .count, .page) # store results
##       # check if we run into an error, and repeat as long until it works
##       if (!is.null(check$error)) {
##         for (i in seq_len(.retry)) {
##           check &lt;- sf(.x, .ownership, .type, .before, .count, .page)
##           if (is.null(check$error)) {
##             break
##           }
##         }
##       }
##       return(check)
##     }
##   ) %&gt;%
##     purrr::transpose() %&gt;%
##     purrr::map(., purrr::compact)
##   
##   print(paste0(&quot;Results: &quot;, scales::comma(length(lst$result))))
##   print(paste0(&quot;Errors:  &quot;, scales::comma(length(lst$error))))
##   
##   return(lst)
## }</code></pre>
</div>
<div id="download-index-links" class="section level3">
<h3>Download Index-Links</h3>
<p>Here we use a really simple caching procedure so that we don’t have to re-run the whole expression if we already extracted index-links.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(lst_paths<span class="sc">$</span>path_filing)) {</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  .prc <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">symbol =</span> <span class="fu">character</span>(), <span class="at">.rows =</span> <span class="dv">0</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  .prc <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(lst_paths<span class="sc">$</span>path_filing)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>tab_f500_use <span class="ot">&lt;-</span> <span class="fu">filter</span>(tab_f500_t10, <span class="sc">!</span>symbol <span class="sc">%in%</span> .prc<span class="sc">$</span>symbol)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">nrow</span>(tab_f500_use) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  lst_filings <span class="ot">&lt;-</span> <span class="fu">map_company_filings</span>(</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">.tickers =</span> tab_f500_use<span class="sc">$</span>symbol, <span class="at">.type =</span> <span class="st">&quot;10-K&quot;</span>, <span class="at">.count =</span> <span class="dv">100</span>, </span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">.sleep =</span> .<span class="dv">2</span>, <span class="at">.progress =</span> <span class="cn">FALSE</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  tab_filings <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(.prc, <span class="fu">bind_rows</span>(lst_filings<span class="sc">$</span>result, <span class="at">.id =</span> <span class="st">&quot;symbol&quot;</span>))</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_rds</span>(tab_filings, lst_paths<span class="sc">$</span>path_filing)</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>  tab_filings <span class="ot">&lt;-</span> .prc</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;Results: 0&quot;
## [1] &quot;Errors:  8&quot;</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>tab_filings <span class="ot">&lt;-</span> tab_filings <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id =</span> <span class="fu">stri_replace_all_fixed</span>(</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">basename</span>(href), <span class="fu">paste0</span>(<span class="st">&quot;.&quot;</span>, <span class="fu">file_ext</span>(href)), <span class="st">&quot;&quot;</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(id, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>In total we got 8 errors.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>tab_f500_t10 <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>symbol <span class="sc">%in%</span> <span class="fu">read_rds</span>(lst_paths<span class="sc">$</span>path_filing)<span class="sc">$</span>symbol) <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">show_table</span>(<span class="at">.n =</span> <span class="dv">5</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class=" lightable-paper lightable-hover table" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; margin-left: auto; margin-right: auto; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
symbol
</th>
<th style="text-align:left;">
name
</th>
<th style="text-align:left;">
sector
</th>
<th style="text-align:right;">
price
</th>
<th style="text-align:right;">
price_earnings
</th>
<th style="text-align:right;">
dividend_yield
</th>
<th style="text-align:right;">
earnings_share
</th>
<th style="text-align:right;">
x52_week_low
</th>
<th style="text-align:right;">
x52_week_high
</th>
<th style="text-align:right;">
market_cap
</th>
<th style="text-align:right;">
ebitda
</th>
<th style="text-align:right;">
price_sales
</th>
<th style="text-align:right;">
price_book
</th>
<th style="text-align:left;">
sec_filings
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
BRK.B
</td>
<td style="text-align:left;">
Berkshire Hathaway
</td>
<td style="text-align:left;">
Financials
</td>
<td style="text-align:right;">
191.42
</td>
<td style="text-align:right;">
30.43
</td>
<td style="text-align:right;">
0.000000
</td>
<td style="text-align:right;">
9.76
</td>
<td style="text-align:right;">
217.62
</td>
<td style="text-align:right;">
160.93
</td>
<td style="text-align:right;">
261401203633
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1.432823
</td>
<td style="text-align:right;">
1.58
</td>
<td style="text-align:left;">
<a href="http://www.sec.gov/cgi-bin/browse-edgar?action=getcompany&amp;CIK=BRK.B" class="uri">http://www.sec.gov/cgi-bin/browse-edgar?action=getcompany&amp;CIK=BRK.B</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
DWDP
</td>
<td style="text-align:left;">
DowDuPont
</td>
<td style="text-align:left;">
Materials
</td>
<td style="text-align:right;">
68.21
</td>
<td style="text-align:right;">
49.43
</td>
<td style="text-align:right;">
2.152975
</td>
<td style="text-align:right;">
1.59
</td>
<td style="text-align:right;">
77.08
</td>
<td style="text-align:right;">
64.01
</td>
<td style="text-align:right;">
165203312427
</td>
<td style="text-align:right;">
5250000000
</td>
<td style="text-align:right;">
2.692239
</td>
<td style="text-align:right;">
1.54
</td>
<td style="text-align:left;">
<a href="http://www.sec.gov/cgi-bin/browse-edgar?action=getcompany&amp;CIK=DWDP" class="uri">http://www.sec.gov/cgi-bin/browse-edgar?action=getcompany&amp;CIK=DWDP</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
UTX
</td>
<td style="text-align:left;">
United Technologies
</td>
<td style="text-align:left;">
Industrials
</td>
<td style="text-align:right;">
127.48
</td>
<td style="text-align:right;">
19.26
</td>
<td style="text-align:right;">
2.121694
</td>
<td style="text-align:right;">
5.70
</td>
<td style="text-align:right;">
139.24
</td>
<td style="text-align:right;">
107.05
</td>
<td style="text-align:right;">
105387272474
</td>
<td style="text-align:right;">
10584000000
</td>
<td style="text-align:right;">
1.732412
</td>
<td style="text-align:right;">
3.40
</td>
<td style="text-align:left;">
<a href="http://www.sec.gov/cgi-bin/browse-edgar?action=getcompany&amp;CIK=UTX" class="uri">http://www.sec.gov/cgi-bin/browse-edgar?action=getcompany&amp;CIK=UTX</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
PCLN
</td>
<td style="text-align:left;">
Priceline.com Inc
</td>
<td style="text-align:left;">
Consumer Discretionary
</td>
<td style="text-align:right;">
1806.06
</td>
<td style="text-align:right;">
24.26
</td>
<td style="text-align:right;">
0.000000
</td>
<td style="text-align:right;">
42.66
</td>
<td style="text-align:right;">
2067.99
</td>
<td style="text-align:right;">
1589.00
</td>
<td style="text-align:right;">
91817448863
</td>
<td style="text-align:right;">
4803487000
</td>
<td style="text-align:right;">
9.176564
</td>
<td style="text-align:right;">
6.92
</td>
<td style="text-align:left;">
<a href="http://www.sec.gov/cgi-bin/browse-edgar?action=getcompany&amp;CIK=PCLN" class="uri">http://www.sec.gov/cgi-bin/browse-edgar?action=getcompany&amp;CIK=PCLN</a>
</td>
</tr>
<tr>
<td style="text-align:left;">
CELG
</td>
<td style="text-align:left;">
Celgene Corp. 
</td>
<td style="text-align:left;">
Health Care
</td>
<td style="text-align:right;">
91.02
</td>
<td style="text-align:right;">
13.27
</td>
<td style="text-align:right;">
0.000000
</td>
<td style="text-align:right;">
3.58
</td>
<td style="text-align:right;">
147.17
</td>
<td style="text-align:right;">
92.85
</td>
<td style="text-align:right;">
74921079154
</td>
<td style="text-align:right;">
5233000000
</td>
<td style="text-align:right;">
5.830071
</td>
<td style="text-align:right;">
7.49
</td>
<td style="text-align:left;">
<a href="http://www.sec.gov/cgi-bin/browse-edgar?action=getcompany&amp;CIK=CELG" class="uri">http://www.sec.gov/cgi-bin/browse-edgar?action=getcompany&amp;CIK=CELG</a>
</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># browseURL(&quot;https://www.sec.gov/cgi-bin/browse-edgar?company=BRK.B&amp;match=&amp;filenum=&amp;State=&amp;Country=&amp;SIC=&amp;myowner=exclude&amp;action=getcompany&quot;)</span></span></code></pre></div>
<p>Let’s quickly look at the result. (There are several ways to do this. For small Dataframes we can simply use the RStudio build-in viewer)</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">show_table</span>(tab_filings, <span class="at">.n =</span> <span class="dv">5</span>)</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class=" lightable-paper lightable-hover table" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; margin-left: auto; margin-right: auto; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
symbol
</th>
<th style="text-align:left;">
accession_number
</th>
<th style="text-align:left;">
act
</th>
<th style="text-align:left;">
file_number
</th>
<th style="text-align:left;">
filing_date
</th>
<th style="text-align:left;">
accepted_date
</th>
<th style="text-align:left;">
href
</th>
<th style="text-align:left;">
type
</th>
<th style="text-align:left;">
film_number
</th>
<th style="text-align:left;">
form_name
</th>
<th style="text-align:left;">
description
</th>
<th style="text-align:left;">
size
</th>
<th style="text-align:left;">
id
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
AAPL
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
34
</td>
<td style="text-align:left;">
001-36743
</td>
<td style="text-align:left;">
2020-10-30
</td>
<td style="text-align:left;">
2020-10-29
</td>
<td style="text-align:left;">
<a href="https://www.sec.gov/Archives/edgar/data/320193/000032019320000096/0000320193-20-000096-index.htm" class="uri">https://www.sec.gov/Archives/edgar/data/320193/000032019320000096/0000320193-20-000096-index.htm</a>
</td>
<td style="text-align:left;">
10-K
</td>
<td style="text-align:left;">
201273977
</td>
<td style="text-align:left;">
Annual report [Section 13 and 15(d), not S-K Item 405]
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
12 MB
</td>
<td style="text-align:left;">
0000320193-20-000096-index
</td>
</tr>
<tr>
<td style="text-align:left;">
AAPL
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
34
</td>
<td style="text-align:left;">
001-36743
</td>
<td style="text-align:left;">
2019-10-31
</td>
<td style="text-align:left;">
2019-10-30
</td>
<td style="text-align:left;">
<a href="https://www.sec.gov/Archives/edgar/data/320193/000032019319000119/0000320193-19-000119-index.htm" class="uri">https://www.sec.gov/Archives/edgar/data/320193/000032019319000119/0000320193-19-000119-index.htm</a>
</td>
<td style="text-align:left;">
10-K
</td>
<td style="text-align:left;">
191181423
</td>
<td style="text-align:left;">
Annual report [Section 13 and 15(d), not S-K Item 405]
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
12 MB
</td>
<td style="text-align:left;">
0000320193-19-000119-index
</td>
</tr>
<tr>
<td style="text-align:left;">
AAPL
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
34
</td>
<td style="text-align:left;">
001-36743
</td>
<td style="text-align:left;">
2018-11-05
</td>
<td style="text-align:left;">
2018-11-05
</td>
<td style="text-align:left;">
<a href="https://www.sec.gov/Archives/edgar/data/320193/000032019318000145/0000320193-18-000145-index.htm" class="uri">https://www.sec.gov/Archives/edgar/data/320193/000032019318000145/0000320193-18-000145-index.htm</a>
</td>
<td style="text-align:left;">
10-K
</td>
<td style="text-align:left;">
181158788
</td>
<td style="text-align:left;">
Annual report [Section 13 and 15(d), not S-K Item 405]
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
12 MB
</td>
<td style="text-align:left;">
0000320193-18-000145-index
</td>
</tr>
<tr>
<td style="text-align:left;">
AAPL
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
34
</td>
<td style="text-align:left;">
001-36743
</td>
<td style="text-align:left;">
2017-11-03
</td>
<td style="text-align:left;">
2017-11-03
</td>
<td style="text-align:left;">
<a href="https://www.sec.gov/Archives/edgar/data/320193/000032019317000070/0000320193-17-000070-index.htm" class="uri">https://www.sec.gov/Archives/edgar/data/320193/000032019317000070/0000320193-17-000070-index.htm</a>
</td>
<td style="text-align:left;">
10-K
</td>
<td style="text-align:left;">
171174673
</td>
<td style="text-align:left;">
Annual report [Section 13 and 15(d), not S-K Item 405]
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
14 MB
</td>
<td style="text-align:left;">
0000320193-17-000070-index
</td>
</tr>
<tr>
<td style="text-align:left;">
AAPL
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
34
</td>
<td style="text-align:left;">
001-36743
</td>
<td style="text-align:left;">
2016-10-26
</td>
<td style="text-align:left;">
2016-10-26
</td>
<td style="text-align:left;">
<a href="https://www.sec.gov/Archives/edgar/data/320193/000162828016020309/0001628280-16-020309-index.htm" class="uri">https://www.sec.gov/Archives/edgar/data/320193/000162828016020309/0001628280-16-020309-index.htm</a>
</td>
<td style="text-align:left;">
10-K
</td>
<td style="text-align:left;">
161953070
</td>
<td style="text-align:left;">
Annual report [Section 13 and 15(d), not S-K Item 405]
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
13 MB
</td>
<td style="text-align:left;">
0001628280-16-020309-index
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="get-company-details" class="section level2">
<h2>Get Company Details</h2>
<p>After we got the index links from EDGAR, we proceed by scraping filing details. Again, we use a custom function to do this <strong>map_filing_details()</strong> and use a simple caching algorithm.</p>
<div id="function-map_filing_details" class="section level3">
<h3>Function: map_filing_details()</h3>
<pre><code>## function(.id, .hrefs, .progress = TRUE, .sleep = 0, .retry = 5) {
##   sf &lt;- purrr::safely(edgarWebR::filing_details)
##   names(.hrefs) &lt;- .id
##   pb &lt;- progress::progress_bar$new(total = length(.hrefs))
##   
##   lst &lt;- purrr::map(
##     .x = .hrefs,
##     .f = ~ {
##       if (.progress) pb$tick() # Progress bar
##       Sys.sleep(.sleep) # Optionally, a sleep parameter
##       check &lt;- sf(.x) # store results
##       # check if we run into an error, and repeat as long until it works
##       if (!is.null(check$error)) {
##         for (i in seq_len(.retry)) {
##           check &lt;- sf(.x)
##           if (is.null(check$error)) {
##             break
##           }
##         }
##       }
##       return(check)
##     }
##   ) %&gt;%
##     purrr::transpose() %&gt;%
##     purrr::map(., purrr::compact)
##   
##   print(paste0(&quot;Results: &quot;, scales::comma(length(lst$result))))
##   print(paste0(&quot;Errors:  &quot;, scales::comma(length(lst$error))))
##   
##   return(lst)
## }</code></pre>
</div>
<div id="download-details" class="section level3">
<h3>Download Details</h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(lst_paths<span class="sc">$</span>path_detail)) {</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  .prc <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">id =</span> <span class="fu">character</span>(), <span class="at">.rows =</span> <span class="dv">0</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  .prc <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(lst_paths<span class="sc">$</span>path_detail)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>tab_filings_use <span class="ot">&lt;-</span> <span class="fu">filter</span>(tab_filings, <span class="sc">!</span>id <span class="sc">%in%</span> .prc<span class="sc">$</span>id)</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">nrow</span>(tab_filings_use) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  lst_details <span class="ot">&lt;-</span> <span class="fu">map_filing_details</span>(</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">.id =</span> tab_filings_use<span class="sc">$</span>id, <span class="at">.hrefs =</span> tab_filings_use<span class="sc">$</span>href, <span class="at">.sleep =</span> <span class="dv">1</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>  lst_details <span class="ot">&lt;-</span> <span class="fu">transpose</span>(lst_details<span class="sc">$</span>result)</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>  lst_details <span class="ot">&lt;-</span> <span class="fu">map</span>(lst_details, <span class="sc">~</span> <span class="fu">bind_rows</span>(.x, <span class="at">.id =</span> <span class="st">&quot;id&quot;</span>))</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>  tab_details <span class="ot">&lt;-</span> <span class="fu">reduce</span>(lst_details, left_join, <span class="at">by =</span> <span class="st">&quot;id&quot;</span>)</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>  tab_details <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(.prc, .tab_details)</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_rds</span>(.tab_details, lst_paths<span class="sc">$</span>path_detail)</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>  tab_details <span class="ot">&lt;-</span> .prc</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(tab_filings_use)</span></code></pre></div>
<p>From the <strong>2,364</strong> index links we retrieved in the last step, we got <strong>89,302</strong> different document links.</p>
<p>It’s important to notice, that such data retrieval tasks often result in very large datasets.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(tab_details)</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>tab_details <span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">year</span>(period_date)) <span class="sc">%&gt;%</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">type =</span> type.x) <span class="sc">%&gt;%</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(type, year) <span class="sc">%&gt;%</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> year, <span class="at">values_from =</span> n, <span class="at">names_sort =</span> <span class="cn">TRUE</span>, <span class="at">values_fill =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">show_table</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class=" lightable-paper lightable-hover table" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; margin-left: auto; margin-right: auto; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
type
</th>
<th style="text-align:right;">
1993
</th>
<th style="text-align:right;">
1994
</th>
<th style="text-align:right;">
1995
</th>
<th style="text-align:right;">
1996
</th>
<th style="text-align:right;">
1997
</th>
<th style="text-align:right;">
1998
</th>
<th style="text-align:right;">
1999
</th>
<th style="text-align:right;">
2000
</th>
<th style="text-align:right;">
2001
</th>
<th style="text-align:right;">
2002
</th>
<th style="text-align:right;">
2003
</th>
<th style="text-align:right;">
2004
</th>
<th style="text-align:right;">
2005
</th>
<th style="text-align:right;">
2006
</th>
<th style="text-align:right;">
2007
</th>
<th style="text-align:right;">
2008
</th>
<th style="text-align:right;">
2009
</th>
<th style="text-align:right;">
2010
</th>
<th style="text-align:right;">
2011
</th>
<th style="text-align:right;">
2012
</th>
<th style="text-align:right;">
2013
</th>
<th style="text-align:right;">
2014
</th>
<th style="text-align:right;">
2015
</th>
<th style="text-align:right;">
2016
</th>
<th style="text-align:right;">
2017
</th>
<th style="text-align:right;">
2018
</th>
<th style="text-align:right;">
2019
</th>
<th style="text-align:right;">
2020
</th>
<th style="text-align:right;">
2021
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
10-K
</td>
<td style="text-align:right;">
780
</td>
<td style="text-align:right;">
855
</td>
<td style="text-align:right;">
900
</td>
<td style="text-align:right;">
938
</td>
<td style="text-align:right;">
929
</td>
<td style="text-align:right;">
1020
</td>
<td style="text-align:right;">
1056
</td>
<td style="text-align:right;">
1058
</td>
<td style="text-align:right;">
875
</td>
<td style="text-align:right;">
2258
</td>
<td style="text-align:right;">
2629
</td>
<td style="text-align:right;">
2666
</td>
<td style="text-align:right;">
2843
</td>
<td style="text-align:right;">
3037
</td>
<td style="text-align:right;">
2932
</td>
<td style="text-align:right;">
3400
</td>
<td style="text-align:right;">
3855
</td>
<td style="text-align:right;">
3965
</td>
<td style="text-align:right;">
4116
</td>
<td style="text-align:right;">
4117
</td>
<td style="text-align:right;">
4124
</td>
<td style="text-align:right;">
4008
</td>
<td style="text-align:right;">
4863
</td>
<td style="text-align:right;">
4744
</td>
<td style="text-align:right;">
4626
</td>
<td style="text-align:right;">
4586
</td>
<td style="text-align:right;">
4830
</td>
<td style="text-align:right;">
4868
</td>
<td style="text-align:right;">
280
</td>
</tr>
<tr>
<td style="text-align:left;">
10-K/A
</td>
<td style="text-align:right;">
124
</td>
<td style="text-align:right;">
185
</td>
<td style="text-align:right;">
142
</td>
<td style="text-align:right;">
106
</td>
<td style="text-align:right;">
74
</td>
<td style="text-align:right;">
111
</td>
<td style="text-align:right;">
92
</td>
<td style="text-align:right;">
80
</td>
<td style="text-align:right;">
147
</td>
<td style="text-align:right;">
232
</td>
<td style="text-align:right;">
170
</td>
<td style="text-align:right;">
150
</td>
<td style="text-align:right;">
140
</td>
<td style="text-align:right;">
126
</td>
<td style="text-align:right;">
248
</td>
<td style="text-align:right;">
174
</td>
<td style="text-align:right;">
75
</td>
<td style="text-align:right;">
141
</td>
<td style="text-align:right;">
44
</td>
<td style="text-align:right;">
148
</td>
<td style="text-align:right;">
30
</td>
<td style="text-align:right;">
53
</td>
<td style="text-align:right;">
76
</td>
<td style="text-align:right;">
36
</td>
<td style="text-align:right;">
116
</td>
<td style="text-align:right;">
47
</td>
<td style="text-align:right;">
44
</td>
<td style="text-align:right;">
36
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
10-K405
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
347
</td>
<td style="text-align:right;">
469
</td>
<td style="text-align:right;">
491
</td>
<td style="text-align:right;">
696
</td>
<td style="text-align:right;">
464
</td>
<td style="text-align:right;">
572
</td>
<td style="text-align:right;">
611
</td>
<td style="text-align:right;">
812
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
10-K405/A
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
109
</td>
<td style="text-align:right;">
149
</td>
<td style="text-align:right;">
72
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
97
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="select-documents-for-download" class="section level2">
<h2>Select Documents for Download</h2>
<p>In order to reduce the amount of documents we download, we pre-select specific documents.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>tab_download <span class="ot">&lt;-</span> tab_details <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="fu">select</span>(tab_filings, symbol, id), <span class="at">by =</span> <span class="st">&quot;id&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">file_ext =</span> tools<span class="sc">::</span><span class="fu">file_ext</span>(href),</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">year</span>(period_date),</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> size <span class="sc">/</span> <span class="fl">1e6</span>,</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">where</span>(is.character), <span class="sc">~</span> <span class="fu">stri_replace_all_regex</span>(., <span class="st">&quot;[[:blank:]]+&quot;</span>, <span class="st">&quot; &quot;</span>)),</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">c</span>(type.y, description.y), <span class="sc">~</span> <span class="fu">if_else</span>(. <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;&quot;</span>, <span class="st">&quot; &quot;</span>), <span class="cn">NA_character_</span>, .))</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, document, <span class="at">state =</span> company_incorporation_state, </span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">sic =</span> sic_code, year, symbol, company_name, company_cik, </span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">type1 =</span> type.x, <span class="at">type2 =</span> type.y, <span class="at">desc =</span> description.y, </span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>         period_date, href, size, file_ext) <span class="sc">%&gt;%</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">between</span>(year, <span class="dv">2005</span>, <span class="dv">2020</span>))</span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>tab_download <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">type =</span> type1) <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(type, year) <span class="sc">%&gt;%</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>() <span class="sc">%&gt;%</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> year, <span class="at">values_from =</span> n, <span class="at">names_sort =</span> <span class="cn">TRUE</span>, <span class="at">values_fill =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">show_table</span>()</span></code></pre></div>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class=" lightable-paper lightable-hover table" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; margin-left: auto; margin-right: auto; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
type
</th>
<th style="text-align:right;">
2005
</th>
<th style="text-align:right;">
2006
</th>
<th style="text-align:right;">
2007
</th>
<th style="text-align:right;">
2008
</th>
<th style="text-align:right;">
2009
</th>
<th style="text-align:right;">
2010
</th>
<th style="text-align:right;">
2011
</th>
<th style="text-align:right;">
2012
</th>
<th style="text-align:right;">
2013
</th>
<th style="text-align:right;">
2014
</th>
<th style="text-align:right;">
2015
</th>
<th style="text-align:right;">
2016
</th>
<th style="text-align:right;">
2017
</th>
<th style="text-align:right;">
2018
</th>
<th style="text-align:right;">
2019
</th>
<th style="text-align:right;">
2020
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
10-K
</td>
<td style="text-align:right;">
1357
</td>
<td style="text-align:right;">
1455
</td>
<td style="text-align:right;">
1401
</td>
<td style="text-align:right;">
1629
</td>
<td style="text-align:right;">
1844
</td>
<td style="text-align:right;">
1896
</td>
<td style="text-align:right;">
1969
</td>
<td style="text-align:right;">
1950
</td>
<td style="text-align:right;">
1970
</td>
<td style="text-align:right;">
1907
</td>
<td style="text-align:right;">
2326
</td>
<td style="text-align:right;">
2268
</td>
<td style="text-align:right;">
2200
</td>
<td style="text-align:right;">
2193
</td>
<td style="text-align:right;">
2308
</td>
<td style="text-align:right;">
2337
</td>
</tr>
<tr>
<td style="text-align:left;">
10-K/A
</td>
<td style="text-align:right;">
62
</td>
<td style="text-align:right;">
63
</td>
<td style="text-align:right;">
124
</td>
<td style="text-align:right;">
87
</td>
<td style="text-align:right;">
31
</td>
<td style="text-align:right;">
58
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
74
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
24
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
58
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
18
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="overview-number-and-size-of-documents" class="section level2">
<h2>Overview: Number and Size of Documents</h2>
<p>As you can see in the plot and the prints below, getting data from the web can result in really big data sets. (Keep in mind that we only downloaded data for 100 companies). The <strong>download_edgar_files()</strong> function will alleviate this problem by zipping data before writing to disk.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>.tmp <span class="ot">&lt;-</span> tab_download <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">size =</span> <span class="fu">sum</span>(size), <span class="at">n =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>.geom_size <span class="ot">&lt;-</span> .tmp <span class="sc">%&gt;%</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> size)) <span class="sc">+</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span> </span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span> </span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span> </span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span> </span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Size per Year (in MB)&quot;</span>)</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>.geom_n <span class="ot">&lt;-</span> .tmp <span class="sc">%&gt;%</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> n)) <span class="sc">+</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span> </span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span> </span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span> </span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span> </span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Number of Documents per year&quot;</span>)</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>.geom_size <span class="sc">/</span> .geom_n</span></code></pre></div>
<p><img src="01_get_edgar_data_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>tab_download_txt <span class="ot">&lt;-</span> tab_download <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(file_ext <span class="sc">==</span> <span class="st">&quot;txt&quot;</span>, desc <span class="sc">==</span> <span class="st">&quot;Complete submission text file&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(symbol, <span class="fu">desc</span>(year), <span class="fu">desc</span>(period_date)) <span class="sc">%&gt;%</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(symbol, year, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(document, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">paste0</span>(</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Docs: &quot;</span>, <span class="fu">comma</span>(<span class="fu">nrow</span>(tab_download_txt)), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Size: &quot;</span>, <span class="fu">comma</span>(<span class="fu">sum</span>(tab_download_txt<span class="sc">$</span>size)), <span class="st">&quot; MB&quot;</span>)</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## Docs: 1,327
## Size: 28,347 MB</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>tab_download_htm <span class="ot">&lt;-</span> tab_download <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">startsWith</span>(file_ext, <span class="st">&quot;htm&quot;</span>), <span class="fu">grepl</span>(<span class="st">&quot;10-K&quot;</span>, desc)) <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(symbol, <span class="fu">desc</span>(year), <span class="fu">desc</span>(period_date)) <span class="sc">%&gt;%</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(symbol, year, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(document, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">paste0</span>(</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Docs: &quot;</span>, <span class="fu">comma</span>(<span class="fu">nrow</span>(tab_download_htm)), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Size: &quot;</span>, <span class="fu">comma</span>(<span class="fu">sum</span>(tab_download_htm<span class="sc">$</span>size)), <span class="st">&quot; MB&quot;</span>)</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## Docs: 967
## Size: 3,728 MB</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>tab_download_xxx <span class="ot">&lt;-</span> tab_download <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">startsWith</span>(file_ext, <span class="st">&quot;x&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(symbol, <span class="fu">desc</span>(year), <span class="fu">desc</span>(period_date)) <span class="sc">%&gt;%</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(document, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">paste0</span>(</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Docs: &quot;</span>, <span class="fu">comma</span>(<span class="fu">nrow</span>(tab_download_xxx)), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Size: &quot;</span>, <span class="fu">comma</span>(<span class="fu">sum</span>(tab_download_xxx<span class="sc">$</span>size)), <span class="st">&quot; MB&quot;</span>)</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## Docs: 6,049
## Size: 9,511 MB</code></pre>
</div>
<div id="download-documents" class="section level2">
<h2>Download Documents</h2>
<p>Again we use a custom function <strong>download_edgar_files()</strong> to download the documents.</p>
<div id="function-download_edgar_files" class="section level3">
<h3>Function: download_edgar_files()</h3>
<pre><code>## function(.tab, .dir, .retry = 5, .sleep = 1) {
##   if (!dir.exists(.dir)) dir.create(.dir, recursive = TRUE)
##   files_zip &lt;- list.files(.dir, pattern = &quot;zip$&quot;)
##   
##   
##   tab_ &lt;- .tab %&gt;%
##     select(year, symbol, document, href, file_ext) %&gt;%
##     mutate(
##       file_ext = case_when(
##         file_ext == &quot;txt&quot; ~ &quot;txt&quot;,
##         startsWith(file_ext, &quot;htm&quot;) ~ &quot;htm&quot;,
##         TRUE ~ &quot;xxx&quot;
##       ),
##       path_downlod = file.path(.dir, document),
##       path_zip = file.path(.dir, paste0(file_ext, &quot;_&quot;, symbol, &quot;-&quot;, year, &quot;.zip&quot;))
##     ) %&gt;%
##     group_by(symbol, year, path_zip) %&gt;%
##     summarise(across(c(document, href, path_downlod), list), .groups = &quot;drop&quot;) %&gt;%
##     filter(!basename(path_zip) %in% files_zip)
##   
##   if (nrow(tab_) == 0) return(NULL)
##   
##   
##   lst_ &lt;- group_split(tab_, symbol, year)
##   
##   
##   
##   
##   f_try &lt;- function(.url, .path) {
##     try(download.file(.url, .path, quiet = TRUE, mode = &quot;wb&quot;), silent = TRUE)
##   }
##   
##   f_download &lt;- function(.row, .retry) {
##     
##     urls_ &lt;- unlist(.row$href)
##     paths_ &lt;- unlist(.row$path_downlod)
##     
##     lgl_sucess_ &lt;- logical(length(urls_))
##     
##     for (i in seq_len(length(urls_))) {
##       check_ &lt;- f_try(urls_[i], paths_[i])
##       
##       if (inherits(check_, &quot;try-error&quot;)) {
##         for (j in 1:.retry) {
##           check_ &lt;- f_try(urls_[i], paths_[i])
##           if (!inherits(check_, &quot;try-error&quot;)) break
##           Sys.sleep(.sleep)
##         }
##       }
##       
##       lgl_sucess_[i] &lt;- ifelse(inherits(check_, &quot;try-error&quot;), FALSE, TRUE)
##       Sys.sleep(.sleep)
##       
##     }
##     .row[[&quot;success&quot;]] &lt;- list(lgl_sucess_)
##     return(.row)
##     
##   }
##   
##   f_zip &lt;- function(.row, .dir) {
##     paths_ &lt;- unlist(.row$path_downlod)
##     zip_ &lt;- .row$path_zip
##     files_ &lt;- list.files(.dir)
##     paths_ &lt;- paths_[basename(paths_) %in% files_]
##     
##     zip::zipr(zip_, paths_, compression_level = 9)
##     invisible(file.remove(paths_))
##     
##   }
##   
##   f_all &lt;- function(.row, .dir, .retry) {
##     tab_ &lt;- suppressMessages(suppressWarnings(invisible(f_download(.row, .retry))))
##     suppressMessages(suppressWarnings(invisible(f_zip(.row, .dir))))
##     return(tab_)
##   }
##   
##   f_all(.row = lst_[[1]], .dir = .dir, .retry)
##   
##   pb &lt;- progress::progress_bar$new(total = length(lst_))
##   map_dfr(lst_, ~ {pb$tick(); f_all(.x, .dir, .retry)})
##   
##   
## }</code></pre>
</div>
<div id="download-files" class="section level3">
<h3>Download Files</h3>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>.dir_docs <span class="ot">&lt;-</span> <span class="st">&quot;2_output/01_get_edgar_data/documents/&quot;</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>tab_xxx <span class="ot">&lt;-</span> <span class="fu">download_edgar_files</span>(tab_download_xxx, .dir_docs, <span class="dv">10</span>, <span class="dv">2</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>tab_htm <span class="ot">&lt;-</span> <span class="fu">download_edgar_files</span>(tab_download_htm, .dir_docs, <span class="dv">10</span>, <span class="dv">2</span>)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>tab_txt <span class="ot">&lt;-</span> <span class="fu">download_edgar_files</span>(tab_download_txt, .dir_docs, <span class="dv">10</span>, <span class="dv">2</span>)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>tab_zip_files <span class="ot">&lt;-</span> <span class="fu">list_files_tab</span>(.dir_docs, <span class="at">info =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(doc_id, file_ext, path, size) <span class="sc">%&gt;%</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">size =</span> size <span class="sc">/</span> <span class="fl">1e6</span>)</span></code></pre></div>
<p>Below you can see that we were able to reduce the dataset from more than 40 GB to just 3.7 GB by simply zipping the output.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">paste0</span>(</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Docs: &quot;</span>, <span class="fu">comma</span>(<span class="fu">nrow</span>(tab_zip_files)), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>,</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Size: &quot;</span>, <span class="fu">comma</span>(<span class="fu">sum</span>(tab_zip_files<span class="sc">$</span>size)), <span class="st">&quot; MB&quot;</span>)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## Docs: 3,298
## Size: 3,768 MB</code></pre>
</div>
</div>
<div id="save-files" class="section level2">
<h2>Save Files</h2>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(tab_download_htm, <span class="st">&quot;2_output/01_get_edgar_data/htm_download.rds&quot;</span>)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(tab_download_txt, <span class="st">&quot;2_output/01_get_edgar_data/txt_download.rds&quot;</span>)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(tab_download_xxx, <span class="st">&quot;2_output/01_get_edgar_data/xxx_download.rds&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="own-function-calls" class="section level1">
<h1>Own Function Calls</h1>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lsf.str</span>()</span></code></pre></div>
<pre><code>## create_dirs : function (.dirs)  
## download_edgar_files : function (.tab, .dir, .retry = 5, .sleep = 1)  
## get_f500 : function ()  
## list_files_tab : function (dirs, reg = &quot;*&quot;, id = &quot;doc_id&quot;, rec = FALSE, info = FALSE)  
## map_company_filings : function (.tickers, .ownership = FALSE, .type = &quot;&quot;, .before = &quot;&quot;, .count = 100, 
##     .page = 1, .progress = TRUE, .sleep = 0, .retry = 5)  
## map_filing_details : function (.id, .hrefs, .progress = TRUE, .sleep = 0, .retry = 5)  
## own_get_fs : function (.path, .dir_cache)  
## own_XBRL : function ()  
## own_xbrlDoAll : function (file.inst, cache.dir = &quot;xbrl.Cache&quot;, prefix.out = NULL, verbose = FALSE, 
##     delete.cached.inst = TRUE)  
## remove_html_tags : function (.string, rm_linebreaks = TRUE)  
## show_table : function (.tab, .n = Inf)  
## xbrl_extract_elements : function (.zip, .dir_tmp, .dir_out)  
## xbrl_process_elements : function (.inst)</code></pre>
</div>
<div id="session-info" class="section level1">
<h1>Session Info</h1>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>sessioninfo<span class="sc">::</span><span class="fu">session_info</span>()</span></code></pre></div>
<pre><code>## - Session info ------------------------------------------------------------------
##  setting  value                       
##  version  R version 4.0.3 (2020-10-10)
##  os       Windows 10 x64              
##  system   x86_64, mingw32             
##  ui       RStudio                     
##  language (EN)                        
##  collate  English_Germany.1252        
##  ctype    English_Germany.1252        
##  tz       Europe/Berlin               
##  date     2021-04-20                  
## 
## - Packages ----------------------------------------------------------------------
##  ! package        * version date       lib source        
##  P assertthat       0.2.1   2019-03-21 [?] CRAN (R 4.0.0)
##  P backports        1.2.1   2020-12-09 [?] CRAN (R 4.0.3)
##  P broom            0.7.6   2021-04-05 [?] CRAN (R 4.0.3)
##  P bslib            0.2.4   2021-01-25 [?] CRAN (R 4.0.4)
##  P cellranger       1.1.0   2016-07-27 [?] CRAN (R 4.0.0)
##  P cli              2.4.0   2021-04-05 [?] CRAN (R 4.0.3)
##  P codetools        0.2-16  2018-12-24 [?] CRAN (R 4.0.3)
##  P colorspace       2.0-0   2020-11-11 [?] CRAN (R 4.0.3)
##  P crayon           1.4.1   2021-02-08 [?] CRAN (R 4.0.4)
##  P curl             4.3     2019-12-02 [?] CRAN (R 4.0.0)
##  P data.table       1.14.0  2021-02-21 [?] CRAN (R 4.0.4)
##  P DBI              1.1.1   2021-01-15 [?] CRAN (R 4.0.3)
##  P dbplyr           2.1.1   2021-04-06 [?] CRAN (R 4.0.3)
##  P digest           0.6.27  2020-10-24 [?] CRAN (R 4.0.3)
##  P dplyr          * 1.0.5   2021-03-05 [?] CRAN (R 4.0.4)
##  P edgarWebR      * 1.0.3   2020-09-28 [?] CRAN (R 4.0.5)
##  P ellipsis         0.3.1   2020-05-15 [?] CRAN (R 4.0.0)
##  P evaluate         0.14    2019-05-28 [?] CRAN (R 4.0.0)
##  P fansi            0.4.2   2021-01-15 [?] CRAN (R 4.0.3)
##  P farver           2.1.0   2021-02-28 [?] CRAN (R 4.0.4)
##  P forcats        * 0.5.1   2021-01-27 [?] CRAN (R 4.0.4)
##  P fs               1.5.0   2020-07-31 [?] CRAN (R 4.0.2)
##  P furrr          * 0.2.2   2021-01-29 [?] CRAN (R 4.0.4)
##  P future         * 1.21.0  2020-12-10 [?] CRAN (R 4.0.3)
##  P generics         0.1.0   2020-10-31 [?] CRAN (R 4.0.3)
##  P ggplot2        * 3.3.3   2020-12-30 [?] CRAN (R 4.0.3)
##  P globals          0.14.0  2020-11-22 [?] CRAN (R 4.0.3)
##  P glue             1.4.2   2020-08-27 [?] CRAN (R 4.0.2)
##  P gtable           0.3.0   2019-03-25 [?] CRAN (R 4.0.0)
##  P haven            2.3.1   2020-06-01 [?] CRAN (R 4.0.0)
##  P here           * 1.0.1   2020-12-13 [?] CRAN (R 4.0.3)
##  P highr            0.8     2019-03-20 [?] CRAN (R 4.0.0)
##  P hms              1.0.0   2021-01-13 [?] CRAN (R 4.0.3)
##  P htmltools        0.5.1.1 2021-01-22 [?] CRAN (R 4.0.4)
##  P httr             1.4.2   2020-07-20 [?] CRAN (R 4.0.2)
##  P janeaustenr      0.1.5   2017-06-10 [?] CRAN (R 4.0.0)
##  P janitor        * 2.1.0   2021-01-05 [?] CRAN (R 4.0.3)
##  P jquerylib        0.1.3   2020-12-17 [?] CRAN (R 4.0.4)
##  P jsonlite         1.7.2   2020-12-09 [?] CRAN (R 4.0.3)
##  P kableExtra     * 1.3.4   2021-02-20 [?] CRAN (R 4.0.4)
##  P knitr            1.31    2021-01-27 [?] CRAN (R 4.0.4)
##  P koRpus         * 0.13-5  2021-02-02 [?] CRAN (R 4.0.5)
##  P koRpus.lang.en * 0.1-4   2020-10-24 [?] CRAN (R 4.0.5)
##  P labeling         0.4.2   2020-10-20 [?] CRAN (R 4.0.3)
##  P lattice          0.20-41 2020-04-02 [?] CRAN (R 4.0.3)
##  P lifecycle        1.0.0   2021-02-15 [?] CRAN (R 4.0.4)
##  P listenv          0.8.0   2019-12-05 [?] CRAN (R 4.0.0)
##  P lubridate      * 1.7.10  2021-02-26 [?] CRAN (R 4.0.4)
##  P magrittr         2.0.1   2020-11-17 [?] CRAN (R 4.0.3)
##  P Matrix           1.2-18  2019-11-27 [?] CRAN (R 4.0.3)
##  P modelr           0.1.8   2020-05-19 [?] CRAN (R 4.0.0)
##  P munsell          0.5.0   2018-06-12 [?] CRAN (R 4.0.0)
##  P openxlsx       * 4.2.3   2020-10-27 [?] CRAN (R 4.0.3)
##  P parallelly       1.24.0  2021-03-14 [?] CRAN (R 4.0.4)
##  P patchwork      * 1.1.1   2020-12-17 [?] CRAN (R 4.0.3)
##  P pillar           1.5.1   2021-03-05 [?] CRAN (R 4.0.4)
##  P pkgconfig        2.0.3   2019-09-22 [?] CRAN (R 4.0.0)
##  P prettyunits      1.1.1   2020-01-24 [?] CRAN (R 4.0.0)
##  P progress         1.2.2   2019-05-16 [?] CRAN (R 4.0.0)
##  P purrr          * 0.3.4   2020-04-17 [?] CRAN (R 4.0.0)
##  P R6               2.5.0   2020-10-28 [?] CRAN (R 4.0.3)
##  P Rcpp             1.0.6   2021-01-15 [?] CRAN (R 4.0.3)
##  P readr          * 1.4.0   2020-10-05 [?] CRAN (R 4.0.3)
##  P readxl           1.3.1   2019-03-13 [?] CRAN (R 4.0.0)
##    renv             0.13.1  2021-03-18 [1] CRAN (R 4.0.3)
##  P reprex           2.0.0   2021-04-02 [?] CRAN (R 4.0.5)
##  P rlang            0.4.10  2020-12-30 [?] CRAN (R 4.0.3)
##  P rmarkdown        2.7     2021-02-19 [?] CRAN (R 4.0.4)
##  P rprojroot        2.0.2   2020-11-15 [?] CRAN (R 4.0.3)
##  P rstudioapi       0.13    2020-11-12 [?] CRAN (R 4.0.3)
##  P rvest            1.0.0   2021-03-09 [?] CRAN (R 4.0.4)
##  P sass             0.3.1   2021-01-24 [?] CRAN (R 4.0.4)
##  P scales         * 1.1.1   2020-05-11 [?] CRAN (R 4.0.0)
##  P sessioninfo      1.1.1   2018-11-05 [?] CRAN (R 4.0.0)
##  P snakecase        0.11.0  2019-05-25 [?] CRAN (R 4.0.0)
##  P SnowballC        0.7.0   2020-04-01 [?] CRAN (R 4.0.0)
##  P stringi        * 1.5.3   2020-09-09 [?] CRAN (R 4.0.2)
##  P stringr        * 1.4.0   2019-02-10 [?] CRAN (R 4.0.2)
##  P svglite          2.0.0   2021-02-20 [?] CRAN (R 4.0.4)
##  P sylly          * 0.1-6   2020-09-20 [?] CRAN (R 4.0.5)
##  P sylly.en         0.1-3   2018-03-19 [?] CRAN (R 4.0.5)
##  P systemfonts      1.0.1   2021-02-09 [?] CRAN (R 4.0.4)
##  P textstem       * 0.1.4   2018-04-09 [?] CRAN (R 4.0.5)
##  P tibble         * 3.1.0   2021-02-25 [?] CRAN (R 4.0.4)
##  P tidyr          * 1.1.3   2021-03-03 [?] CRAN (R 4.0.4)
##  P tidyselect       1.1.0   2020-05-11 [?] CRAN (R 4.0.0)
##  P tidytext       * 0.3.0   2021-01-06 [?] CRAN (R 4.0.3)
##  P tidyverse      * 1.3.0   2019-11-21 [?] CRAN (R 4.0.0)
##  P tokenizers       0.2.1   2018-03-29 [?] CRAN (R 4.0.0)
##  P utf8             1.2.1   2021-03-12 [?] CRAN (R 4.0.3)
##  P vctrs            0.3.7   2021-03-29 [?] CRAN (R 4.0.5)
##  P viridisLite      0.3.0   2018-02-01 [?] CRAN (R 4.0.0)
##  P webshot          0.5.2   2019-11-22 [?] CRAN (R 4.0.0)
##  P withr            2.4.1   2021-01-26 [?] CRAN (R 4.0.4)
##  P xfun             0.22    2021-03-11 [?] CRAN (R 4.0.4)
##  P xml2             1.3.2   2020-04-23 [?] CRAN (R 4.0.0)
##  P yaml             2.2.1   2020-02-01 [?] CRAN (R 4.0.0)
##  P zip            * 2.1.1   2020-08-27 [?] CRAN (R 4.0.2)
## 
## [1] E:/R/R_projects/MMA22_ACC/renv/library/R-4.0/x86_64-w64-mingw32
## [2] C:/Users/MUcke/AppData/Local/Temp/RtmpyYGwQM/renv-system-library
## 
##  P -- Loaded and on-disk path mismatch.</code></pre>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
